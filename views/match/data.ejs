<%- include("../partials/header") %>

<h1>Match Data</h1>

<a href="/match">Go back</a>

<div class="row">
  
  <!--Point Table-->
  <div class="col-md-6">
    <h2 class="sub-header">Points</h2>
    <div class="table-responsive">
      <table id="pointTable" class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">Point #</th>
            <th scope="col">Set Score</th>
            <th scope="col">Game Score</th>
            <th scope="col">Point Score</th>
            <th scope="col">Server</th>
            <th scope="col">Side</th>
            <th scope="col">Rally Length</th>
            <th scope="col">Winner</th>
            <th scope="col">Result</th>
          </tr>
        </thead>
        <tbody>
        <% data.forEach(point => { %>
          <tr>
              <th scope="row"><%= point.point %></th>
              <td><%= point.setScore %></td>
              <td><%= point.gameScore %></td>
              <td><%= point.pointScore %></td>
              <td><%= point.server %></td>
              <td><%= point.side %></td>
              <td><%= point.rallyLength %></td>
              <td><%= point.winner %></td>                
              <td><%= point.result %></td>
            </tr>
        <% }) %>
        </tbody>
      </table>
    </div>
  </div>
  
 <!--Shot Table-->
 <div class="col-md-6">
  <h2 class="sub-header">Shots</h2>
  <div class="table-responsive">
    <table id="shotTable" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">Point #</th>
          <th scope="col">Shot #</th>
          <th scope="col">Shot # w/Serve</th>
          <th scope="col">Shot By</th>
          <th scope="col">Shot</th>
          <th scope="col">Location</th>
          <th scope="col">Result</th>
        </tr>
      </thead>
      <tbody>
      
      <% data.forEach(point => { %>
        <% point.shots.sort((a,b) => { %>
          <% return a.shotNum - b.shotNum || a.shotNumWithServe - b.shotNumWithServe %>
        <% }).forEach(shot => { %>
          <tr>
            <td><%= shot.pointNum %></td>
            <td><%= shot.shotNum %></td>
            <td><%= shot.shotNumWithServe %></td>
            <td><%= shot.shotBy %></td>
            <td><%= shot.shotStroke %></td>
            <td><%= shot.shotLocation %></td>
            <td><%= shot.shotResult %></td>
          </tr>
        <% }) %>
      <% }) %>
      </tbody>
    </table>
  </div>
</div>

</div>


<%- include("../partials/footer") %>

